syntax = "proto3";

package agent;

import "common.proto";

service Agent {
  rpc ProcessStream(AgentRequest) returns (stream AgentResponse);
  rpc ProcessUnary(AgentRequest) returns (AgentResponse);
  rpc ListSubAgents(common.Empty) returns (ListSubAgentsResponse);
  rpc RunSubAgent(RunSubAgentRequest) returns (AgentResponse);
  rpc ListHandoffs(ListHandoffsRequest) returns (ListHandoffsResponse);
  rpc RunHandoff(RunHandoffRequest) returns (RunHandoffResponse);
}

message AgentRequest {
  repeated common.Message messages = 1;
  optional string resource_id = 2;
  optional string llm_token = 3;
  optional string model = 4;
  optional string agent = 5;
}

message AgentResponse {
  string object = 1;
  int64 created = 2;
  string model = 3;
  common.Usage usage = 5;
  string resource_id = 6;
  repeated common.Message messages = 7;
}

message SubAgentInfo {
  string agent_id = 1;
  string description = 2;
}

message ListSubAgentsResponse {
  repeated SubAgentInfo agents = 1;
}

message RunSubAgentRequest {
  string resource_id = 1;
  string agent_id = 2;
  string prompt = 3;
  optional string llm_token = 4;
  optional string model = 5;
}

message ListHandoffsRequest {
  string resource_id = 1;
}

message ListHandoffsResponse {
  repeated string labels = 1;
}

message RunHandoffRequest {
  string resource_id = 1;
  string label = 2;
}

message RunHandoffResponse {
  string resource_id = 1;
  string agent_id = 2;
  string prompt = 3;
}
